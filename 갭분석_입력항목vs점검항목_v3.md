# 갭 분석 v3: 입력항목 통합정의서 vs 통합 환급액계산 점검항목

> **Summary**: 입력항목 통합정의서(279개 필드)가 통합_환급액계산.md 점검항목(점검 0 ~ 점검 37-3)에서 요구하는 납세자 가변 입력 데이터를 정밀하게 커버하는지 심층 분석
>
> **설계 문서**: `입력항목_통합정의서.md` (v2: 279필드 = 기존 64 + 추가 215)
> **구현/참조 문서**: `통합_환급액계산.md` (점검 0 ~ 점검 37-3, 약 3,930행)
> **분석일**: 2026-02-21
> **분석 유형**: 정밀 재분석 (v3)
> **분석 범위**: 납세자가 직접 입력하거나 ERP/회계시스템에서 가져오는 가변 데이터만 (기준정보/세율표/증빙서류 제외)

---

## 1. 분석 개요

### 1.1 분석 배경

| 버전 | 매치율 | 필드수 | 누락 | 비고 |
|:----:|:-----:|:-----:|:----:|------|
| v1 | 79.0% | 229 | 42개 | 최초 분석, HIGH 15 + MEDIUM 17 + LOW 10 |
| v2 | 100.0% | 279 | 0개 | v1 누락 42개 해소, +50필드 추가 |
| **v3** | **아래 산출** | **279 + 신규** | **아래 상세** | **정밀 심층 분석** |

v2 분석에서 100% 매치율을 달성했으나, 다음 관점에서 보다 정밀한 재분석을 수행합니다:

1. 점검항목의 계산 로직에서 **암묵적으로 필요하지만 명시되지 않은** 입력 데이터
2. **조건부 분기**에서 필요한 판단 기준 데이터
3. **사후관리/추징** 계산에 필요한 이력 데이터
4. **다사업장, 다업종** 시나리오에서 필요한 확장 데이터
5. **경정청구 전/후** 비교에 필요한 기존 신고 데이터
6. **2026년 세법개정** 대응에 필요한 신규 데이터

### 1.2 분석 방법론

본 v3 분석은 v2의 "명시적 데이터 포인트 매핑" 방식을 넘어, 점검항목 내 **계산 로직을 역추적(backward tracing)**하여 각 계산식의 모든 피연산자(operand)가 입력 필드로 확보되어 있는지를 검증합니다.

분석 순서:
- [1단계] 과세체계 확인 (점검 0 ~ 점검 9-8)
- [2단계] 공통 전제 조건 (점검 2 ~ 점검 9-8)
- [3단계] 개별 공제/감면 (점검 10 ~ 점검 37-3)
- [4단계] 최종 환급액 산출

---

## 2. 점검항목별 정밀 분석

### 2.1 점검 0: 과세표준 및 세액 재산정

#### 법인세 (lines 285~360)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 각 사업연도 소득 | CRP_B006 | OK |
| 이월결손금(공제전/후) | CRP_B007/B008 | OK |
| 과세표준 | CMN_B011 | OK |
| 산출세액 | CMN_B012 | OK |
| 세무조정 항목별 상세 | CRP_M001a~f | OK |
| 접대비 한도 적용용 수입금액 | CMN_B010 | OK |
| 업무용 승용차 비용 상세 | CRP_M002a~j | OK |
| 결산조정 vs 신고조정 구분 | CRP_M007a~b | OK |
| **이월결손금 발생연도별 상세** | CRP_B013 (text) | **WEAK** |

> **발견 GAP-01**: `CRP_B013`(이월결손금잔액_연도별)은 text 타입으로 정의되어 있으나, 점검 27(line 3232~3237)에서는 발생연도별 잔액, 이월기한 도과 여부(15년/10년), 공제한도(중소100%/비중소80%/60%)를 각각 계산해야 합니다. 연도별 구조화된 array of object가 필요합니다.

#### 종합소득세 (lines 362~478)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 종합소득금액 구성요소 | INC_M001a~g | OK |
| 소득공제 항목 | INC_B012~B016 | OK |
| 주택임대소득 과세방식 | INC_M009a~d | OK |
| 업무용 승용차 비용 (개인) | INC_M010a~d | OK |
| **기장방식 (추계신고시 경비율 종류)** | INC_B023 | **WEAK** |
| **경비율 종류 (단순/기준)** | - | **MISSING** |

> **발견 GAP-02**: 점검 0 (line 464~478)에서 추계신고자의 경비율 적용 오류(단순경비율 vs 기준경비율) 확인이 필요합니다. `INC_B023`에서 추계를 선택할 수 있지만, 적용된 경비율 종류와 실제 적용되어야 할 경비율 종류를 비교하기 위한 세부 필드가 없습니다.

### 2.2 점검 1: 그룹별 비교 분석 (lines 480~548)

이 점검은 그룹A(감면 중심) vs 그룹B(공제 중심) 비교 시뮬레이션을 수행합니다. 필요 데이터는 대부분 다른 점검항목에서 커버되지만:

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 각 그룹별 예상 환급액 시뮬레이션용 전체 데이터 | 다수 | OK |
| **개인사업자 감면 소득 배분 공식 관련** | INC_M015a~g | OK |

### 2.3 점검 2~4: 소재지/농특세 (lines 554~594)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 사업장 소재지 | CMN_B005, CRP_B003~B004, INC_M015b | OK |
| 인구감소지역 해당여부 | CMN_B006, INC_M015f | OK |
| 수도권 과밀억제권역 여부 | CMN_M012b | OK |
| 기납부 농특세 | CMN_M007a | OK |
| **사업장별 수도권 세부 구분** | - | **WEAK** |

> **발견 GAP-03**: 점검 2(line 556~578)에서 수도권 내 과밀억제권역/성장관리권역/자연보전권역 구분이 필요합니다. `CMN_B005`(사업장소재지)는 시/군/구 단위 문자열이므로 시스템이 자체 판별할 수 있으나, `CMN_M012b`(수도권과밀억제권역_해당여부)는 투자자산 소재지 전용입니다. 사업장 자체의 세부 권역 구분 필드가 별도로 있으면 계산 정확성이 향상됩니다. 다만, 소재지 문자열에서 시스템이 판별 가능하므로 심각도는 LOW입니다.

### 2.4 점검 5: 최저한세 (lines 596~644)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 기업규모 | CMN_B002 | OK |
| 과세표준 (법인) | CMN_B011 | OK |
| 산출세액 (개인) | INC_B024 | OK |
| 중소기업 졸업 관련 | CMN_M008a~c | OK |

### 2.5 점검 6~7: 중복배제/허용 (lines 646~688)

점검 6~7은 규칙 적용이므로 추가 입력 데이터 불필요. OK.

### 2.6 점검 8~9: 금액/비율 계산 원칙 (lines 689~735)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 상시근로자 제외대상자수 | CMN_M001e | OK |
| 상시근로자 월별 상세 | CMN_M001a~d | OK |
| **사원별 단시간근로 여부 판별** | CMN_M010j | OK |
| **사원별 근로계약기간 (1년 미만 판별)** | CMN_M010p + CMN_M010c~d | OK |
| **파견근로자 여부** | - | **MISSING** |

> **발견 GAP-04**: 점검 9(line 709)에서 파견근로자는 상시근로자에서 제외됩니다. 현재 `CMN_M010` 사원별 상세 데이터에 파견근로자 여부 필드가 없어, 시스템이 자동으로 파견 여부를 식별할 수 없습니다.

### 2.7 점검 9-2: 중소기업 해당 여부 (lines 715~735)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 매출액 기준 | CMN_B010 | OK |
| 독립성 기준 (법인) | CRP_B014 등 | OK |
| 졸업유예 | CMN_M008a~c | OK |
| **업종별 평균매출액** | - | **NOTE** |

> 업종별 평균매출액 기준은 중소기업기본법 시행령 별표 기준정보이므로 입력 항목이 아닌 참조 데이터입니다. 제외 범위에 해당하여 누락이 아닙니다.

### 2.8 점검 9-3: 적용순서 (lines 737~772)

규칙 적용이므로 추가 입력 데이터 불필요. OK.

### 2.9 점검 9-4: 기존 신고 내역 확인 (lines 774~812)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 기존 적용 공제/감면 항목 및 금액 | CMN_B009, CMN_B024 | OK |
| 기존 산출세액/결정세액/납부세액 | CMN_B012, CRP_B009~B010 | OK |
| 이월 미공제 세액 | CRP_B012, CMN_M005a~f | OK |
| 수정신고/경정 이력 | CMN_M013a | OK |
| 기납부세액 (개인) | INC_M002a~h | OK |
| **당초 신고서 항목별 공제감면 금액** | CMN_M011c (text) | **WEAK** |

> **발견 GAP-05**: `CMN_M011c`(당초_공제감면세액_항목별)는 text 타입입니다. 점검 9-4(line 778)에서는 기존 적용 공제/감면의 **항목별 금액**을 정확히 알아야 경정 전/후 차액 계산이 가능합니다. 구조화된 array of object 형태가 필요합니다.

### 2.10 점검 9-5: 환급가산금 (lines 814~835)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 원래 세금 납부일 | CMN_M013b | OK |
| **중간예납 납부일 (법인)** | CRP_M006b | OK |
| **경정청구 접수 예정일** | - | **NOTE** |

> 경정청구 접수일은 시스템 생성 데이터이므로 입력 항목 아님. 제외.

### 2.11 점검 9-6: 다사업장 소득 합산/배분 (lines 837~882)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 다사업장별 소득 상세 | INC_M015a~g | OK |
| 공동사업자 지분율 | INC_B005 | OK |
| 공동사업장 전체 소득금액 | INC_B006 | OK |
| 분리과세 소득 여부 | INC_B019 | OK |
| 금융소득 합계 2천만원 초과여부 | INC_M001g | OK |
| **다사업장 간 결손금 통산 정보** | - | **MISSING** |

> **발견 GAP-06**: 점검 9-6(line 844)에서 "사업장 간 결손금 통산 가능(부동산임대 제외)"이 명시되어 있습니다. 다사업장 중 일부가 결손(적자)인 경우, 해당 사업장의 결손금을 다른 사업장 소득에서 공제할 수 있습니다. `INC_M015d`(사업장별 사업소득금액)가 음수를 허용하면 결손을 표현할 수 있으나, 부동산임대업 사업장의 결손금은 통산이 제한됩니다. 각 사업장이 부동산임대업인지 아닌지를 판단하기 위한 명시적 표시가 필요합니다. 다만 `INC_M015a`(사업장별 업종코드)로 업종 판별이 가능하므로 심각도는 LOW입니다.

### 2.12 점검 9-7: 소득세 세율 (lines 884~906)

과세연도별 세율표는 기준정보이므로 입력 항목 불필요. OK.

### 2.13 점검 9-8: 결손금 소급공제 환급 (lines 909~929)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 차기연도 결손여부 | INC_B018 | OK |
| 직전 과세연도 산출세액 | - | **MISSING** |
| 직전 과세연도 과세표준 | - | **MISSING** |
| 소급공제 결손금 | - | **MISSING** |

> **발견 GAP-07**: 점검 9-8(line 921)에서 결손금 소급공제 환급세액 산식은 다음과 같습니다:
> `환급세액 = 직전연도 산출세액 x (소급공제 결손금 / 직전연도 과세표준)`
> 이 계산을 위해 **직전 과세연도**의 산출세액과 과세표준이 필요하지만, 현재 통합정의서에는 해당 필드가 없습니다. `CMN_B011`(과세표준)과 `CMN_B012`(산출세액)은 "해당 과세기간" 기준이므로, 직전 연도 데이터가 별도로 필요합니다. 법인의 경우도 점검 0(line 310~321)에서 동일한 로직이 적용됩니다.

### 2.14 점검 10~13: 통합투자세액공제 (lines 937~1016)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 투자자산 상세 | CMN_M004a~h | OK |
| 투자자산 설치 소재지 | CMN_M012a~c | OK |
| 직전 3년 투자금액 | CMN_M002a~c | OK |
| 감가상각 의무 이행 | CMN_M004h | OK |
| 투자자산 2년내 처분 여부 | CMN_M013c | OK |
| **투자 자산별 시설 구분** | CMN_M004b (자산구분코드) | OK |
| **투자자산별 취득가액 합계** | CMN_M004c (개별) | OK |

### 2.15 점검 14~16: 통합고용세액공제 (lines 1022~1557)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 대표자 생년월일/성별/병역 | CMN_B021~B023 | OK |
| 상시근로자 월별 데이터 | CMN_M001a~e | OK |
| 사원별 상세 | CMN_M010a~p | OK |
| 경력단절 재고용 | INC_M008a~d, INC_M013a~e | OK |
| 2022년 이전 고용증대 공제 이력 | CMN_M013d | OK |
| 근로계약 체결일 | CMN_M010p | OK |
| **사원별 북한이탈주민 여부** | - | **MISSING** |
| **사원별 최저임금 미만 여부** | - | **NOTE** |

> **발견 GAP-08**: 점검 14~16에서 청년등 상시근로자의 범위에 "북한이탈주민"이 포함됩니다(line 1127, 1553). 현재 사원별 상세(CMN_M010)에는 청년/장애인/60세이상/경력단절 여부 필드는 있으나, 북한이탈주민 여부 필드가 없습니다.

> **NOTE**: 최저임금 미만 여부는 CMN_M010e(사원_연간총급여액)와 기준정보(최저임금액)를 비교하여 시스템이 판별 가능하므로 입력 필드 불필요.

### 2.16 점검 17~18: 사회보험료 세액공제 (lines 1562~1593)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 사업주 4대보험료 비목별 | CMN_M014a~d | OK |
| 4대보험 대상자별 청년/경력단절 구분 | CMN_M010 | OK |
| **사회보험료 청년 기준: 만 15~29세** | CMN_M010b (주민번호) | OK |

> 사회보험료 세액공제(구법)의 청년 기준은 만 15~29세(통합고용 만 15~34세와 다름)이지만, 주민번호에서 시스템이 나이를 계산하여 구분 가능. OK.

### 2.17 점검 19: 고용증대 세액공제 경과규정 (lines 1601~1607)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 2022년 고용증대세액공제 적용 이력 | CMN_M013d | OK |
| **경과규정 2차/3차 추가공제 이력** | - | **MISSING** |

> **발견 GAP-09**: 점검 19(line 1605)에서 2022년 고용증대세액공제를 받은 경우, 2023~2024년 경과규정에 의한 2차/3차 추가공제 적용 여부를 확인해야 합니다. `CMN_M013d`는 "이력 유무"만 boolean으로 저장하지만, 2차/3차 추가공제의 기적용 여부와 금액을 별도로 확인해야 합니다. 이 정보는 `CMN_M005`(이월세액공제)에 일부 포함될 수 있으나, 경과규정 전용 데이터가 명확하지 않습니다.

### 2.18 점검 20~20-6: 창업중소기업 세액감면 (lines 1614~2115)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 창업일 (법인) | CRP_B011 | OK |
| 창업일 (개인) | INC_B008, INC_M015g | OK |
| 업종코드 | CMN_B003 | OK |
| 사업 양수/승계 여부 | CMN_M013e | OK |
| 벤처기업 확인 여부/확인일 | CMN_B019~B020 | OK |
| 대표자 생년월일/병역 | CMN_B021~B023 | OK |
| 수입금액 | CMN_B010 | OK |
| 최초 소득 발생 과세연도 | CMN_M013f | OK |
| 겸업 법인 업종별 소득 안분 | CRP_M012a | OK |
| **창업 시점(2025이전/2026이후) 판별** | INC_B008, CRP_B011 | OK |
| **고용증가 추가감면 관련 데이터** | CMN_M001 | OK |
| **감면한도 5억원 적용 여부 (2025이후)** | CMN_B007 (과세기간) | OK |
| **과거 동일업종 폐업 이력** | INC_B017 (text) | **WEAK** |

> **발견 GAP-10**: `INC_B017`(과거사업이력)은 text 타입입니다. 점검 20(line 1684~1691)에서는 동일 업종(세분류 기준) 폐업 이력의 **유무**를 정확히 판단해야 합니다. boolean 또는 구조화된 형태가 필요하지만, 현재 text 형태에서는 시스템이 자동 판별하기 어렵습니다.

### 2.19 점검 22~22-6: 연구인력개발비 세액공제 (lines 2132~2634)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| R&D 전담부서 보유여부 | CMN_B018 | OK |
| R&D비 총액/상세 | CMN_M003a~i | OK |
| 직전 4년간 R&D비 | CMN_M003b~e | OK |
| R&D 유형 구분 | CMN_M003j | OK |
| R&D 공제방식 선택 | CMN_M003k | OK |
| 신성장/국가전략기술 R&D비 | CMN_M003n~o | OK |
| 기술인정통보서 유무 | CMN_M003p | OK |
| 연구전담요원 인원수 | CMN_M003l | OK |
| R&D 사전심사 유무 | CMN_M003m | OK |
| 졸업유예 관련 | CMN_M008a~c | OK |
| **수입금액 대비 R&D비 비율 산정** | CMN_B010 + CMN_M003a | OK |

### 2.20 점검 24~24-6: 중소기업 특별세액감면 (lines 2689~3195)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 소기업/중기업 구분 | CMN_B002 | OK |
| 업종 | CMN_B003~B004 | OK |
| 소재지 | CMN_B005 | OK |
| 감면한도 (상시근로자 감소 시 축소) | CMN_M001 | OK |
| 장수 성실중소기업 | CMN_M013g | OK |
| **겸업 시 업종별 수입금액/소득** | - | **WEAK** |

> **발견 GAP-11**: 점검 24-3(line 2886~2899)에서 겸업 법인/개인의 업종별 감면율이 다를 때, 업종별로 각각 안분하여 감면세액을 산출합니다. 법인의 경우 `CRP_M012a`(감면대상 업종별 소득 안분 비율)가 있으나, 이는 단일 비율 값입니다. 3개 이상 업종을 겸업하는 경우 업종별 비율 배열이 필요합니다. 개인의 경우 `INC_M015`(다사업장별)가 있으나, 동일 사업장 내 겸업일 경우는 커버하지 못합니다.

### 2.21 점검 25: 소득 한도 및 경정청구 유의사항 (lines 3197~3203)

규칙 적용. 추가 입력 데이터 불필요. OK.

### 2.22 법인세 전용 점검 26~32-2 (lines 3211~3316)

| 점검 | 필요 데이터 | 매핑 필드 | 상태 |
|:----:|-----------|----------|:----:|
| 26 외국납부세액 | CRP_M004a~f | OK |
| 27 이월결손금 | CRP_B013 (text) | **WEAK** (GAP-01) |
| 28 수입배당금 | CRP_M003a~e | OK |
| 29 중간예납 | CRP_M006a~c | OK |
| 30 지방소득세 | 별도 입력 불필요 | OK |
| 31 기업구조조정 | CRP_M008a~d | OK |
| 32 연결납세 | CRP_M009a, CRP_B014 | OK |
| 32-2 기부금 | CRP_M005a~e | OK |

### 2.23 개인 전용 점검 26~34 (lines 3324~3485)

| 점검 | 필요 데이터 | 매핑 필드 | 상태 |
|:----:|-----------|----------|:----:|
| 26 의료비/교육비/월세 | INC_M012a~f | OK |
| 27 노란우산공제 | INC_M004a | OK |
| 28 연금저축 | INC_M003a~c | OK |
| 29 자녀세액공제 | INC_M005a~f | OK |
| 29-2 결혼세액공제 | INC_M006a~c | OK |
| 30 기장세액공제 | INC_B023 | OK |
| 31 소득공제 누락 | INC_B012~B016, INC_M007, INC_M016a~b | OK |
| 32 지방소득세 | 별도 입력 불필요 | OK |
| 33 벤처투자 | INC_M017a | OK |
| 34 외국납부세액 | INC_M018a~c | OK |
| **31 건강보험료 가입유형** | INC_M007a~c | OK |

### 2.24 공통 점검 33(법)/35(개) ~ 37-3 (lines 3505~3595)

| 점검 | 필요 데이터 | 매핑 필드 | 상태 |
|:----:|-----------|----------|:----:|
| 성실신고확인비용 | CRP_M010a~b, INC_M011a, INC_B022 | OK |
| 착한 임대인 | CMN_M018a, CRP_M011a~b, INC_B020~B021 | OK |
| 재해손실 | CMN_M015a~c | OK |
| 고용유지중소기업 | CMN_M016a~c | OK |
| 영상콘텐츠 | CMN_M017a~c | OK |

### 2.25 4단계: 최종 환급액 산출 (lines 3600~3929)

| 필요 데이터 | 매핑 필드 | 상태 |
|-----------|----------|:----:|
| 모든 공제/감면 관련 데이터 | 다수 | OK |
| 기납부세액 (법인) | CMN_M006a~e | OK |
| 기납부세액 (개인) | INC_M002a~h | OK |
| 환급계좌 | CMN_M009a~c | OK |
| **경정 후 이월세액공제 변동 계산** | CMN_M005 | OK |
| **경정 후 농특세 변동액** | CMN_M007b | OK |

---

## 3. 누락/약점 분석 종합

### 3.1 신규 누락 항목 (MISSING)

| ID | 누락 항목 | 심각도 | 관련 점검 | 설명 | 권장 field_id |
|:--:|----------|:-----:|:--------:|------|:------------:|
| GAP-02 | 추계신고 적용 경비율 종류 | MEDIUM | 점검 0 (line 470) | 단순경비율/기준경비율 구분 필요 | INC_M019a |
| GAP-04 | 사원별 파견근로자 여부 | MEDIUM | 점검 9 (line 709) | 상시근로자 제외 판별용 | CMN_M010q |
| GAP-07 | 직전 과세연도 산출세액/과세표준 | HIGH | 점검 9-8 (line 921), 점검 0 (line 312) | 결손금 소급공제 환급세액 산식 필수 | CMN_M019b, CMN_M019c |
| GAP-08 | 사원별 북한이탈주민 여부 | LOW | 점검 14~16 (line 1127) | 청년등 범위에 포함, 현재 필드 없음 | CMN_M010r |
| GAP-09 | 고용증대공제 경과규정 2차/3차 기적용 금액 | MEDIUM | 점검 19 (line 1605) | 경과규정 선택 적용 비교에 필요 | CMN_M019d |

### 3.2 약점 항목 (WEAK -- 기존 필드 존재하나 구조화 부족)

| ID | 약점 항목 | 심각도 | 관련 점검 | 현재 필드 | 개선 방향 |
|:--:|----------|:-----:|:--------:|----------|----------|
| GAP-01 | 이월결손금 연도별 상세 | HIGH | 점검 27 (line 3232) | CRP_B013 (text) | array of object (발생연도, 잔액, 기한도과여부, 공제한도비율) |
| GAP-05 | 당초 공제감면세액 항목별 | HIGH | 점검 9-4 (line 778) | CMN_M011c (text) | array of object (공제종류코드, 금액, 근거법조) |
| GAP-10 | 과거 동일업종 폐업 이력 | MEDIUM | 점검 20 (line 1684) | INC_B017 (text) | 동일업종폐업여부: boolean + 폐업업종코드: string |
| GAP-11 | 겸업 업종별 소득 안분 | LOW | 점검 24-3 (line 2886) | CRP_M012a (단일 number) | array of object (업종코드, 소득비율, 감면율) |
| GAP-03 | 사업장 수도권 세부 권역 | LOW | 점검 2 (line 556) | CMN_B005 (string) | 시스템 판별 가능, 별도 필드 선택적 |

### 3.3 심각도 분류 기준

| 심각도 | 기준 | 영향 |
|:-----:|------|------|
| HIGH | 해당 데이터 없이 계산 불가. 환급액 산출에 직접 영향 | 필드 추가 필수 |
| MEDIUM | 특정 시나리오에서 계산 정확성 저하. 대체 가능하나 불완전 | 필드 추가 권장 |
| LOW | 시스템 판별 또는 참조 데이터로 대체 가능. 편의성 개선 | 선택적 추가 |

---

## 4. 매치율 산출

### 4.1 데이터 포인트 추출 방법

v3에서는 v2의 202개 데이터 포인트에 더하여, 계산 로직 역추적을 통해 추가로 발견한 10개의 암묵적 데이터 포인트를 포함합니다.

| 구분 | 데이터 포인트 수 |
|------|:-----------:|
| v2 기존 매핑 포인트 | 202 |
| v3 신규 발견 포인트 | 10 |
| **총 분석 대상** | **212** |

### 4.2 매핑 결과

| 분류 | 개수 | 비율 |
|------|:----:|:----:|
| 완전 매핑 (OK) | 199 | 93.9% |
| 약점 매핑 (WEAK -- 개선 필요) | 5 | 2.4% |
| 누락 (MISSING) | 5 | 2.4% |
| 시스템 판별 가능 (NOTE) | 3 | 1.4% |

### 4.3 매치율

| 산정 방식 | 매치율 |
|----------|:-----:|
| 엄격 기준 (OK만 인정) | **93.9%** |
| 완화 기준 (OK + WEAK + NOTE 인정) | **97.6%** |
| v2 기존 포인트 기준 (202/202) | 100.0% |

---

## 5. Overall Scores

| Category | Score | Status |
|----------|:-----:|:------:|
| Design Match (엄격) | 93.9% | PASS |
| Design Match (완화) | 97.6% | PASS |
| HIGH 누락 해소율 | 0/3 | NEEDS ACTION |
| MEDIUM 누락 해소율 | 0/3 | NEEDS ACTION |
| LOW 누락 해소율 | 0/2 | OPTIONAL |
| **Overall (엄격)** | **93.9%** | **PASS** |

---

## 6. 권장 조치

### 6.1 즉시 조치 (HIGH -- 필드 추가 필수)

#### GAP-07: 직전 과세연도 산출세액/과세표준

결손금 소급공제 환급세액 계산의 핵심 피연산자가 누락되어 있습니다.

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CMN_M019a | 직전기_산출세액 | number | C | 점검 0, 9-8 |
| CMN_M019b | 직전기_과세표준 | number | C | 점검 0, 9-8 |
| CMN_M019c | 소급공제_대상_결손금 | number | C | 점검 9-8 |

> 필수 조건: `INC_B018`(차기연도결손여부) = true일 때 필수

#### GAP-01: 이월결손금 연도별 상세 구조화 (법인)

`CRP_B013`을 text에서 array of object로 변경하거나 별도 그룹 필드를 추가합니다.

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CRP_M013a | 이월결손금_발생사업연도 | string | C | 점검 27 |
| CRP_M013b | 이월결손금_발생금액 | number | C | 점검 27 |
| CRP_M013c | 이월결손금_기공제누계액 | number | C | 점검 27 |
| CRP_M013d | 이월결손금_잔액 | number | C | 점검 27 |
| CRP_M013e | 이월결손금_기한도과여부 | boolean | C | 점검 27 |

> 데이터 구조: array of object (사업연도별)

#### GAP-05: 당초 공제감면세액 항목별 구조화

`CMN_M011c`를 text에서 array of object로 변경하거나 별도 그룹 필드를 추가합니다.

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CMN_M020a | 당초_공제감면_종류코드 | enum | Y | 점검 9-4 |
| CMN_M020b | 당초_공제감면_적용금액 | number | Y | 점검 9-4 |
| CMN_M020c | 당초_공제감면_근거법조 | string | C | 점검 9-4 |

> 데이터 구조: array of object (공제/감면 항목별)
> 공제감면 종류코드: 제6조/제7조/제10조/제24조/제29조의8/제30조의4/기타

### 6.2 권장 조치 (MEDIUM -- 필드 추가 권장)

#### GAP-02: 추계신고 적용 경비율 종류

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| INC_M019a | 추계신고_적용경비율종류 | enum | C | 점검 0 |

> 열거값: 단순경비율/기준경비율/미해당
> 필수 조건: `INC_B023`(기장방식) = 추계일 때 필수

#### GAP-04: 사원별 파견근로자 여부

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CMN_M010q | 사원_파견근로자여부 | boolean | C | 점검 9, 15, 16 |

> 필수 조건: 파견근로자가 있는 사업장일 때 필수

#### GAP-09: 고용증대공제 경과규정 기적용 금액

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CMN_M019d | 고용증대_경과규정_기적용금액 | number | C | 점검 19 |
| CMN_M019e | 고용증대_경과규정_적용차수 | enum | C | 점검 19 |

> 열거값(적용차수): 2차/3차/미적용
> 필수 조건: `CMN_M013d` = true일 때 필수

#### GAP-10: 과거 동일업종 폐업 이력 구조화

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| INC_M019b | 동일업종_폐업이력_유무 | boolean | Y | 점검 20 |
| INC_M019c | 폐업_업종코드 | string | C | 점검 20 |

> 필수 조건: 창업감면(제6조) 적용 검토 시 필수

### 6.3 선택 조치 (LOW -- 편의성 개선)

#### GAP-08: 사원별 북한이탈주민 여부

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CMN_M010r | 사원_북한이탈주민여부 | boolean | C | 점검 14~16 |

> 해당 사례가 제한적이지만, 통합고용세액공제의 청년등 범위에 명시적으로 포함되어 있으므로 구조적 완결성을 위해 추가 권장

#### GAP-11: 겸업 업종별 소득 안분 확장

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CRP_M012b | 겸업_업종코드 | string | C | 점검 24-3 |
| CRP_M012c | 겸업_업종별_소득금액 | number | C | 점검 24-3 |

> 데이터 구조: array of object (업종별), CRP_M012a를 대체/확장

#### GAP-03: 사업장 수도권 세부 권역 구분

| 권장 field_id | 필드명 | 데이터타입 | 필수 | 관련 점검 |
|:------------:|--------|-----------|:----:|:--------:|
| CMN_M021a | 사업장_수도권_권역구분 | enum | C | 점검 2 |

> 열거값: 과밀억제/성장관리/자연보전/비수도권/미해당
> 시스템이 소재지 문자열에서 자동 판별 가능하므로 선택적

---

## 7. 필드 추가 시 통합정의서 변동 예상

### 7.1 추가 필드 요약

| 심각도 | 추가 필드 수 | field_id 범위 |
|:-----:|:----------:|:------------:|
| HIGH (필수) | 11 | CMN_M019a~c, CMN_M020a~c, CRP_M013a~e |
| MEDIUM (권장) | 7 | INC_M019a~c, CMN_M010q, CMN_M019d~e |
| LOW (선택) | 5 | CMN_M010r, CRP_M012b~c, CMN_M021a |
| **합계** | **23** | |

### 7.2 보완 후 예상 필드 수

| 구분 | 현재 | HIGH 추가 후 | 전체 추가 후 |
|------|:----:|:----------:|:----------:|
| 공통 | 122 | 128 (+6) | 134 (+12) |
| 법인세 전용 | 61 | 66 (+5) | 68 (+7) |
| 종합소득세 전용 | 96 | 96 (+0) | 100 (+4) |
| **합계** | **279** | **290 (+11)** | **302 (+23)** |

### 7.3 보완 후 예상 매치율

| 적용 범위 | 매치율 |
|----------|:-----:|
| HIGH만 추가 | 97.2% (엄격) |
| HIGH + MEDIUM 추가 | 99.1% (엄격) |
| 전체 추가 | 100.0% (212/212) |

---

## 8. v2 대비 v3 분석 차이점 요약

| 비교 항목 | v2 | v3 |
|----------|:---:|:---:|
| 분석 포인트 수 | 202 | 212 (+10) |
| 매치율 (엄격) | 100.0% | 93.9% |
| 매치율 (완화) | 100.0% | 97.6% |
| 누락 (MISSING) | 0 | 5 (HIGH 3, MEDIUM 2) |
| 약점 (WEAK) | 0 | 5 (HIGH 2, MEDIUM 1, LOW 2) |
| 신규 관점 | 명시적 매핑 | 계산 로직 역추적, 암묵적 요건, 이력/사후관리 데이터 |

### v3에서 추가 발견된 핵심 영역

1. **결손금 소급공제**: 직전 연도 데이터 누락 (GAP-07) -- 환급액 산식의 핵심 피연산자
2. **이월결손금 구조화**: text 타입으로는 연도별 기한도과/잔액 계산 불가 (GAP-01)
3. **당초 신고 데이터 구조화**: 항목별 금액이 text로는 경정 전/후 차액 계산 곤란 (GAP-05)
4. **상시근로자 제외 판별 완결성**: 파견근로자(GAP-04), 북한이탈주민(GAP-08) 필드 부재
5. **경과규정 이력 데이터**: 고용증대세액공제 2차/3차 추가공제 기적용 정보 부재 (GAP-09)

---

## 9. 권장 다음 단계

1. **즉시**: HIGH 누락 11개 필드를 `입력항목_통합정의서.md`에 추가
2. **단기**: MEDIUM 누락 7개 필드를 추가하여 매치율 99.1% 달성
3. **선택**: LOW 5개 필드는 구현 단계에서 필요 시 추가
4. **구조 개선**: text 타입으로 정의된 기존 필드(CRP_B013, CMN_M011c, INC_B017) 중 계산에 직접 사용되는 항목의 데이터 타입을 array of object로 변경 검토
5. **검증**: 추가 후 v4 갭분석 수행하여 100% 매치율 확인

---

## Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 1.0 (v1) | 2026-02-21 | 최초 분석, 79.0% 매치율 | gap-detector |
| 2.0 (v2) | 2026-02-21 | v1 누락 42개 해소, 100.0% 매치율 | gap-detector |
| 3.0 (v3) | 2026-02-21 | 정밀 심층 분석, 계산 로직 역추적, 93.9% (엄격) / 97.6% (완화) | gap-detector |

---

## Related Documents
- 설계 문서: [입력항목_통합정의서.md](입력항목_통합정의서.md)
- 참조 문서: [통합_환급액계산.md](통합_환급액계산.md)
- 이전 분석: [갭분석_입력항목vs점검항목_v2.md](갭분석_입력항목vs점검항목_v2.md)
